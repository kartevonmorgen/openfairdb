[package]
name = "openfairdb"
version = "0.10.5"
authors = ["Markus Kohlhase <mail@markus-kohlhase.de>", "slowtec GmbH <post@slowtec.de>"]
keywords = ["geo", "fair", "sustainability"]
homepage = "https://github.com/kartevonmorgen/openfairdb"
repository = "https://github.com/kartevonmorgen/openfairdb"
license = "AGPL-3.0-or-later"
edition = "2021"

[workspace]
members = [
  "ofdb-boundary",
  "ofdb-core",
  "ofdb-entities",
  "ofdb-gateways",
]
exclude = [ "ofdb-app-clearance" ]

[patch.crates-io]
ofdb-boundary = { path = "./ofdb-boundary" }
ofdb-core = { path = "./ofdb-core" }
ofdb-entities = { path = "./ofdb-entities" }
ofdb-gateways = { path = "./ofdb-gateways" }

[dependencies]
ofdb-boundary = { version = "=0.10.1", features = ["extra-derive"] }
ofdb-core = "=0.0.0"
ofdb-entities = { version = "=0.10.1", features = ["url"] }
ofdb-gateways = "=0.0.0"

anyhow = "1.0.57"
base64 = { version = "0.13.0", optional = true }
captcha = "0.0.9"
chrono = "0.4.19"
clap =  { version = "3.1.18", features = ["cargo"] }
csv = "1.1.6"
diesel = { version = "1.4.8", features = ["sqlite", "r2d2", "chrono"] }
diesel_migrations = { version = "1.4.0", features = ["sqlite"] }
dotenv = "0.15.0"
env_logger = "0.9.0"
fast_chemail = "0.9.6"
jsonwebtoken = { version = "8.1.0", optional = true }
lazy_static = "1.4.0"
log = "0.4.17"
num-traits = "0.2.15"
maud = { version = "0.23.0", optional = true, features = ["rocket"] }
parking_lot = "0.12.0"
passwords = "3.1.9"
pwhash = "1.0.0"
rand = { version = "0.8.5", optional = true }
regex = "1.5.6"
rust-embed = "6.4.0"
# TODO: Update to Rocket 0.5 and switch toolchain from nightly to stable
rocket = "0.4.11"
rocket_contrib = "0.4.11"
rocket_cors = "0.5.2"
serde = { version = "1.0.137", features = ["derive"] }
serde_json = "1.0.81"
strum = "0.24.0"
tantivy = "0.18.0"
# TODO: Version 0.1.x required for rocket_http
time = "0.1.44"
thiserror = "1.0.31"
uuid = { version = "1.1.0", features = ["v4"] }

[dev-dependencies]
rand = "0.8.5"
ofdb-entities = { version = "*", features = ["builders"] }

[build-dependencies]
walkdir = "2.3.2"

[features]
default = ["frontend", "email", "clearance", "cookies", "jwt"]

clearance = []
cookies = []
email = []
frontend = ["maud"]
jwt = ["jsonwebtoken", "base64", "rand"]

[profile.release]
lto = true
opt-level = 3
codegen-units = 1
