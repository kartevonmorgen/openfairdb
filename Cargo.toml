[package]
name = "openfairdb"
version = "0.11.1"
authors = ["slowtec GmbH <post@slowtec.de>"]
keywords = ["geo", "fair", "sustainability"]
homepage = "https://github.com/kartevonmorgen/openfairdb"
repository = "https://github.com/kartevonmorgen/openfairdb"
license = "AGPL-3.0-or-later"
edition = "2021"

[workspace]
members = [
  "ofdb-application",
  "ofdb-boundary",
  "ofdb-core",
  "ofdb-db-sqlite",
  "ofdb-db-tantivy",
  "ofdb-entities",
  "ofdb-gateways",
  "ofdb-seed",
  "ofdb-webserver",
]
exclude = [ "ofdb-app-clearance" ]

[patch.crates-io]
ofdb-application = { path = "./ofdb-application" }
ofdb-boundary    = { path = "./ofdb-boundary"    }
ofdb-core        = { path = "./ofdb-core"        }
ofdb-db-sqlite   = { path = "./ofdb-db-sqlite"   }
ofdb-db-tantivy  = { path = "./ofdb-db-tantivy"  }
ofdb-entities    = { path = "./ofdb-entities"    }
ofdb-gateways    = { path = "./ofdb-gateways"    }
ofdb-seed        = { path = "./ofdb-seed"        }
ofdb-webserver   = { path = "./ofdb-webserver"   }

[dependencies]
ofdb-db-sqlite = { version = "0.0.0", path = "ofdb-db-sqlite" }
ofdb-core = { version = "0.0.0", path = "ofdb-core" }
ofdb-gateways = { version = "0.0.0", path = "ofdb-gateways" }
ofdb-db-tantivy = { version = "0.0.0", path = "ofdb-db-tantivy" }
ofdb-webserver = { version = "=0.0.0" }

env_logger = "0.9.0"
clap =  { version = "3.2.18", features = ["cargo"] }
dotenv = "0.15.0"
log = "0.4.17"
tokio = "1.20.1"

[patch.crates-io.maud]
# TODO: use v0.24.0 as soon as it's published
git = "https://github.com/slowtec/maud"
branch = "rocket-0.5.0-rc.2"

[patch.crates-io.rocket_cors]
# TODO: use v0.6.0 as soon as it's published
git = "https://github.com/lawliet89/rocket_cors.git"
branch = "master"

[patch.crates-io.geocoding]
# TODO: use upstream as soon as https://github.com/georust/geocoding/pull/58 is merged.
git = "https://github.com/slowtec/geocoding"
branch = "remove-reqwest-default-tls-feature"

[dev-dependencies]
rand = "0.8.5"
ofdb-entities = { version = "*", features = ["builders"] }

[profile.release]
lto = true
opt-level = 3
codegen-units = 1
